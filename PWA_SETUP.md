# PWA Setup Guide

This project has been configured with Progressive Web App (PWA) functionality.

## What's Included

1. **Service Worker**: Automatically generated by `@ducanh2912/next-pwa` in production
2. **Web App Manifest**: Located at `/public/manifest.json`
3. **PWA Registration**: Component at `/src/components/PWARegister.tsx`
4. **Caching Strategy**: Configured in `next.config.ts` with Workbox

## Features

- ✅ Offline support
- ✅ App-like experience (standalone mode)
- ✅ Caching for static assets, images, fonts, and API calls
- ✅ Automatic service worker updates
- ✅ Install prompt support
- ✅ RTL (Right-to-Left) support for Persian/Farsi

## Configuration

### PWA Settings (next.config.ts)

- **Development**: PWA is disabled in development mode
- **Production**: PWA is fully enabled
- **Caching**: Multiple caching strategies for different asset types:
  - Fonts: CacheFirst (1 year)
  - Images: StaleWhileRevalidate (24 hours)
  - API calls: NetworkFirst (24 hours)
  - Documents: NetworkFirst (24 hours)

### Manifest Settings

- **Name**: Learnings App
- **Short Name**: Learnings
- **Theme Color**: #10b981 (Emerald green)
- **Display Mode**: Standalone
- **Language**: Persian (fa)
- **Direction**: RTL

## Adding Icons

1. Create a master icon at 512x512 pixels
2. Generate all required sizes (see `/public/icons/README.md`)
3. Place all icons in `/public/icons/` directory

Required sizes:
- 72x72, 96x96, 128x128, 144x144, 152x152, 192x192, 384x384, 512x512

## Testing PWA

### Development
```bash
npm run build
npm start
```

Then test in browser:
1. Open DevTools > Application > Service Workers
2. Check if service worker is registered
3. Test offline mode (DevTools > Network > Offline)

### Production
1. Deploy the app
2. Visit on mobile device
3. Look for "Add to Home Screen" prompt
4. Test offline functionality

## Browser Support

- ✅ Chrome/Edge (Android & Desktop)
- ✅ Safari (iOS 11.3+)
- ✅ Firefox (Android)
- ✅ Samsung Internet

## Troubleshooting

### Service Worker Not Registering
- Check browser console for errors
- Ensure you're on HTTPS (or localhost)
- Clear browser cache and reload

### Icons Not Showing
- Verify icons exist in `/public/icons/`
- Check manifest.json paths are correct
- Clear browser cache

### Offline Not Working
- Build the app in production mode
- Check service worker is active in DevTools
- Verify caching strategies in next.config.ts

## Customization

### Change Theme Color
Update in:
- `app/layout.tsx` → `metadata.themeColor`
- `public/manifest.json` → `theme_color`

### Change App Name
Update in:
- `app/layout.tsx` → `metadata.title`
- `public/manifest.json` → `name` and `short_name`

### Modify Caching
Edit `workboxOptions.runtimeCaching` in `next.config.ts`

## Files Modified

- `next.config.ts` - PWA configuration
- `app/layout.tsx` - PWA metadata and registration
- `public/manifest.json` - Web app manifest
- `src/components/PWARegister.tsx` - Service worker registration
- `package.json` - Added @ducanh2912/next-pwa

## Next Steps

1. Add your app icons to `/public/icons/`
2. Customize manifest.json with your app details
3. Test on real devices
4. Submit to app stores (if using PWA Builder)

